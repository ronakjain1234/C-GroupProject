@page "/login"
@using MudBlazor
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@inject NavigationManager Navigation
@inject ISnackbar Snackbar

<style>
    .login-container {
        display: flex;
        height: 100vh;
    }
    .left-section {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        background: white;
    }
    .right-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        background: linear-gradient(to bottom, #7F67F6, #6A5ACD);
        color: white;
        padding: 2rem;
    }
    .login-card {
        width: 100%;
        max-width: 400px;
        box-shadow: none;
    }
    .sign-up-button {
        background: white;
        color: black;
        width: 120px;
    }
    .eye-icon {
        cursor: pointer;
    }
</style>

<div class="login-container">
    <!-- Left Side - Login Form -->
    <div class="left-section">
        <MudCard Class="login-card">
            <MudCardContent>
                <MudText Typo="Typo.h4" Class="mb-4 text-center">Login to Your Account</MudText>

                <MudTextField @bind-Value="email" 
                            Label="Email" 
                            Variant="Variant.Filled" 
                            Class="mb-3"
                            Required="true"
                            RequiredError="Email is required!" />

                <MudTextField @bind-Value="password" 
                            Label="Password" 
                            Variant="Variant.Filled" 
                            InputType="@(showPassword ? InputType.Text : InputType.Password)"
                            Adornment="Adornment.End"
                            AdornmentIcon="@Icons.Material.Filled.Visibility"
                            OnAdornmentClick="TogglePasswordVisibility"
                            Class="mb-3"
                            Required="true"
                            RequiredError="Password is required!" />

                <div class="d-flex justify-space-between align-center mb-4">
                    <div class="d-flex align-center">
                        <MudCheckBox T="bool" @bind-Checked="rememberMe" />
                        <MudText Typo="Typo.body2" Class="ml-2">Remember me</MudText>
                    </div>
                    <MudButton Variant="Variant.Text" 
                              Color="Color.Primary" 
                              OnClick="@(() => Navigation.NavigateTo("/forgot-password"))">
                        Forgot Password?
                    </MudButton>
                </div>

                <MudButton Variant="Variant.Filled" 
                          Color="Color.Primary" 
                          FullWidth="true"
                          OnClick="HandleLogin"
                          Disabled="@(!IsValidForm())">
                    Sign In
                </MudButton>
            </MudCardContent>
        </MudCard>
    </div>

    <!-- Right Side - Sign Up Section -->
    <div class="right-section">
        <MudText Typo="Typo.h5" Class="mb-2">New Here?</MudText>
        <MudText Typo="Typo.body1" Class="mb-4">Sign up and discover a great amount of new opportunities</MudText>
        <MudButton Variant="Variant.Outlined" 
                   Class="sign-up-button"
                   OnClick="@(() => Navigation.NavigateTo("/signup"))">
            Sign Up
        </MudButton>
    </div>
</div>

@code {
    private string email = "";
    private string password = "";
    private bool rememberMe;
    private bool showPassword;

    private void TogglePasswordVisibility()
    {
        showPassword = !showPassword;
    }

    private bool IsValidForm()
    {
        return !string.IsNullOrWhiteSpace(email) && 
               !string.IsNullOrWhiteSpace(password);
    }

    private async Task HandleLogin()
    {
        if (!IsValidForm())
        {
            Snackbar.Add("Please fill in all required fields", Severity.Warning);
            return;
        }

        // TODO: Implement actual login logic here
        // For now, just simulate a successful login
        await Task.Delay(1000);
        Snackbar.Add("Login successful!", Severity.Success);
        Navigation.NavigateTo("/roles");
    }
} 